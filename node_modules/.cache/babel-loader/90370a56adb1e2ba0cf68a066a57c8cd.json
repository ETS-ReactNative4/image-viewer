{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\src\\\\screens\\\\profile\\\\Profile.js\";\nimport React, { Component } from 'react';\nimport './Profile.css';\nimport { constants } from '../../common/utils';\nimport Header from '../../common/header/Header';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport Modal from '@material-ui/core/Modal';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\nvar styles = {\n  paper: {\n    position: 'relative',\n    width: \"180px\",\n    backgroundColor: \"#fff\",\n    top: \"30%\",\n    margin: \"0 auto\",\n    boxShadow: \"2px 2px #888888\",\n    padding: \"20px\"\n  },\n  media: {\n    height: '200px',\n    paddingTop: '56.25%' // 16:9\n\n  },\n  imageModal: {\n    backgroundColor: \"#fff\",\n    margin: \"0 auto\",\n    boxShadow: \"2px 2px #888888\",\n    padding: \"10px\"\n  }\n};\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n\n    _this.getUserInfo = function () {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userInfoUrl, \"/?access_token=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          profile_picture: jsonResponse.data.profile_picture,\n          username: jsonResponse.data.username,\n          full_name: jsonResponse.data.full_name,\n          posts: jsonResponse.data.counts.media,\n          follows: jsonResponse.data.counts.follows,\n          followed_by: jsonResponse.data.counts.followed_by\n        });\n      }).catch(function (error) {\n        console.log('error user data', error);\n      });\n    };\n\n    _this.getMediaData = function () {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userMediaUrl, \"/?access_token=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          mediaData: jsonResponse.data\n        });\n      }).catch(function (error) {\n        console.log('error media data', error);\n      });\n    };\n\n    _this.handleOpenEditModal = function () {\n      _this.setState({\n        editOpen: true\n      });\n    };\n\n    _this.handleCloseEditModal = function () {\n      _this.setState({\n        editOpen: false\n      });\n    };\n\n    _this.handleOpenImageModal = function (event) {\n      var result = _this.state.mediaData.find(function (item) {\n        return item.id === event.target.id;\n      });\n\n      console.log(result);\n\n      _this.setState({\n        imageModalOpen: true,\n        currentItem: result\n      });\n    };\n\n    _this.handleCloseImageModal = function () {\n      _this.setState({\n        imageModalOpen: false\n      });\n    };\n\n    _this.inputFullNameChangeHandler = function (e) {\n      _this.setState({\n        newFullName: e.target.value\n      });\n    };\n\n    _this.updateClickHandler = function () {\n      if (_this.state.newFullName === '') {\n        _this.setState({\n          fullNameRequired: 'dispBlock'\n        });\n      } else {\n        _this.setState({\n          fullNameRequired: 'dispNone'\n        });\n      }\n\n      if (_this.state.newFullName === \"\") {\n        return;\n      }\n\n      _this.setState({\n        full_name: _this.state.newFullName\n      });\n\n      _this.handleCloseEditModal();\n    };\n\n    _this.likeClickHandler = function (id) {\n      console.log('like id', id);\n      var foundItem = _this.state.currentItem;\n\n      if (typeof foundItem !== undefined) {\n        if (!_this.state.likeSet.has(id)) {\n          foundItem.likes.count++;\n\n          _this.setState(function (_ref) {\n            var likeSet = _ref.likeSet;\n            return {\n              likeSet: new Set(likeSet.add(id))\n            };\n          });\n        } else {\n          foundItem.likes.count--;\n\n          _this.setState(function (_ref2) {\n            var likeSet = _ref2.likeSet;\n            var newLike = new Set(likeSet);\n            newLike.delete(id);\n            return {\n              likeSet: newLike\n            };\n          });\n        }\n      }\n    };\n\n    _this.onAddCommentClicked = function (id) {\n      console.log('id', id);\n\n      if (_this.state.currentComment === \"\" || typeof _this.state.currentComment === undefined) {\n        return;\n      }\n\n      var commentList = _this.state.comments.hasOwnProperty(id) ? _this.state.comments[id].concat(_this.state.currentComment) : [].concat(_this.state.currentComment);\n\n      _this.setState({\n        comments: _objectSpread({}, _this.state.comments, _defineProperty({}, id, commentList)),\n        currentComment: ''\n      });\n    };\n\n    _this.commentChangeHandler = function (e) {\n      _this.setState({\n        currentComment: e.target.value\n      });\n    };\n\n    _this.logout = function () {\n      sessionStorage.clear();\n\n      _this.props.history.replace('/');\n    };\n\n    if (sessionStorage.getItem('access-token') == null) {\n      props.history.replace('/');\n    }\n\n    _this.state = {\n      profile_picture: null,\n      username: null,\n      full_name: null,\n      posts: null,\n      follows: null,\n      followed_by: null,\n      editOpen: false,\n      fullNameRequired: 'dispNone',\n      newFullName: '',\n      mediaData: null,\n      imageModalOpen: false,\n      currentItem: null,\n      likeSet: new Set(),\n      comments: {}\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUserInfo();\n      this.getMediaData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var hashTags = [];\n\n      if (this.state.currentItem !== null) {\n        hashTags = this.state.currentItem.tags.map(function (hash) {\n          return \"#\" + hash;\n        });\n        console.log('state', this.state);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Header, {\n        screen: \"Profile\",\n        userProfileUrl: this.state.profile_picture,\n        handleLogout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"information-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        alt: \"User Image\",\n        src: this.state.profile_picture,\n        style: {\n          width: \"50px\",\n          height: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        style: {\n          marginLeft: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"600px\",\n          fontSize: \"big\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \" \", this.state.username, \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          float: \"left\",\n          width: \"200px\",\n          fontSize: \"small\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \" Posts: \", this.state.posts, \" \"), React.createElement(\"div\", {\n        style: {\n          float: \"left\",\n          width: \"200px\",\n          fontSize: \"small\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \" Follows: \", this.state.follows, \" \"), React.createElement(\"div\", {\n        style: {\n          float: \"left\",\n          width: \"200px\",\n          fontSize: \"small\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \" Followed By: \", this.state.followed_by), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          fontSize: \"small\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \" \", this.state.full_name, React.createElement(Button, {\n        mini: true,\n        variant: \"fab\",\n        color: \"secondary\",\n        \"aria-label\": \"Edit\",\n        style: {\n          marginLeft: \"20px\"\n        },\n        onClick: this.handleOpenEditModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"edit_icon\"))), React.createElement(Modal, {\n        \"aria-labelledby\": \"edit-modal\",\n        \"aria-describedby\": \"modal to edit user full name\",\n        open: this.state.editOpen,\n        onClose: this.handleCloseEditModal,\n        style: {\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: styles.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h5\",\n        id: \"modal-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Edit\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(FormControl, {\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"fullname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Full Name\"), React.createElement(Input, {\n        id: \"fullname\",\n        onChange: this.inputFullNameChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(FormHelperText, {\n        className: this.state.fullNameRequired,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"required\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.updateClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"UPDATE\"))))), this.state.mediaData != null && React.createElement(GridList, {\n        cellHeight: 'auto',\n        cols: 3,\n        style: {\n          padding: \"40px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, this.state.mediaData.map(function (item) {\n        return React.createElement(GridListTile, {\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          id: item.id,\n          style: styles.media,\n          image: item.images.standard_resolution.url,\n          title: item.caption.text,\n          onClick: _this2.handleOpenImageModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }));\n      })), this.state.currentItem != null && React.createElement(Modal, {\n        \"aria-labelledby\": \"image-modal\",\n        \"aria-describedby\": \"modal to show image details\",\n        open: this.state.imageModalOpen,\n        onClose: this.handleCloseImageModal,\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          backgroundColor: \"#fff\",\n          width: '70%',\n          height: '70%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: '50%',\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        src: this.state.currentItem.images.standard_resolution.url,\n        alt: this.state.currentItem.caption.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          width: '50%',\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          borderBottom: '2px solid #f2f2f2',\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'flex-start',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        alt: \"User Image\",\n        src: this.state.profile_picture,\n        style: {\n          width: \"50px\",\n          height: \"50px\",\n          margin: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, this.state.username)), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          height: '100%',\n          flexDirection: 'column',\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, this.state.currentItem.caption.text), React.createElement(Typography, {\n        style: {\n          color: '#4dabf5'\n        },\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, hashTags.join(' ')), this.state.comments.hasOwnProperty(this.state.currentItem.id) && this.state.comments[this.state.currentItem.id].map(function (comment, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          component: \"p\",\n          style: {\n            fontWeight: 'bold'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310\n          },\n          __self: this\n        }, sessionStorage.getItem('username'), \":\"), React.createElement(Typography, {\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313\n          },\n          __self: this\n        }, comment));\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"Add to favorites\",\n        onClick: this.likeClickHandler.bind(this, this.state.currentItem.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, this.state.likeSet.has(this.state.currentItem.id) && React.createElement(FavoriteIconFill, {\n        style: {\n          color: '#F44336'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }), !this.state.likeSet.has(this.state.currentItem.id) && React.createElement(FavoriteIconBorder, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      })), React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, this.state.currentItem.likes.count, \" Likes\")), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        style: {\n          flexGrow: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"comment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Add Comment\"), React.createElement(Input, {\n        id: \"comment\",\n        value: this.state.currentComment,\n        onChange: this.commentChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.onAddCommentClicked.bind(this, this.state.currentItem.id),\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, \"ADD\")))))))));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default Profile;","map":{"version":3,"sources":["C:\\Users\\ATISRIVA\\Desktop\\imageviewer\\imageviewer\\src\\screens\\profile\\Profile.js"],"names":["React","Component","constants","Header","Avatar","Button","Icon","Modal","Typography","FormControl","InputLabel","Input","FormHelperText","CardMedia","GridList","GridListTile","IconButton","FavoriteIconBorder","FavoriteIconFill","styles","paper","position","width","backgroundColor","top","margin","boxShadow","padding","media","height","paddingTop","imageModal","Profile","props","getUserInfo","that","url","userInfoUrl","sessionStorage","getItem","fetch","method","then","response","json","jsonResponse","setState","profile_picture","data","username","full_name","posts","counts","follows","followed_by","catch","error","console","log","getMediaData","userMediaUrl","mediaData","handleOpenEditModal","editOpen","handleCloseEditModal","handleOpenImageModal","event","result","state","find","item","id","target","imageModalOpen","currentItem","handleCloseImageModal","inputFullNameChangeHandler","e","newFullName","value","updateClickHandler","fullNameRequired","likeClickHandler","foundItem","undefined","likeSet","has","likes","count","Set","add","newLike","delete","onAddCommentClicked","currentComment","commentList","comments","hasOwnProperty","concat","commentChangeHandler","logout","clear","history","replace","hashTags","tags","map","hash","marginLeft","fontSize","float","alignItems","justifyContent","images","standard_resolution","caption","text","display","flexDirection","borderBottom","color","join","comment","index","fontWeight","bind","flexGrow"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './Profile.css';\nimport {constants} from '../../common/utils'\nimport Header from '../../common/header/Header';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport Modal from '@material-ui/core/Modal';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\n\nconst styles = {\n    paper: {\n        position: 'relative',\n        width: \"180px\",\n        backgroundColor: \"#fff\",\n        top: \"30%\",\n        margin: \"0 auto\",\n        boxShadow: \"2px 2px #888888\",\n        padding: \"20px\"\n    },\n    media: {\n        height: '200px',\n        paddingTop: '56.25%', // 16:9\n    },\n    imageModal: {\n        backgroundColor: \"#fff\",\n        margin: \"0 auto\",\n        boxShadow: \"2px 2px #888888\",\n        padding: \"10px\",\n    }\n};\n\nclass Profile extends Component {\n\n    constructor(props) {\n        super(props);\n        if (sessionStorage.getItem('access-token') == null) {\n            props.history.replace('/');\n        }\n        this.state = {\n            profile_picture: null,\n            username: null,\n            full_name: null,\n            posts: null,\n            follows: null,\n            followed_by: null,\n            editOpen: false,\n            fullNameRequired: 'dispNone',\n            newFullName: '',\n            mediaData: null,\n            imageModalOpen: false,\n            currentItem: null,\n            likeSet:new Set(),\n            comments:{},\n        }\n    }\n\n    componentDidMount() {\n        this.getUserInfo();\n        this.getMediaData();\n    }\n\n    getUserInfo = () => {\n        let that = this;\n        let url = `${constants.userInfoUrl}/?access_token=${sessionStorage.getItem('access-token')}`;\n        return fetch(url, {\n            method: 'GET',\n        }).then((response) => {\n            return response.json();\n        }).then((jsonResponse) => {\n            that.setState({\n                profile_picture: jsonResponse.data.profile_picture,\n                username: jsonResponse.data.username,\n                full_name: jsonResponse.data.full_name,\n                posts: jsonResponse.data.counts.media,\n                follows: jsonResponse.data.counts.follows,\n                followed_by: jsonResponse.data.counts.followed_by\n            });\n        }).catch((error) => {\n            console.log('error user data',error);\n        });\n    }\n\n    getMediaData = () => {\n        let that = this;\n        let url = `${constants.userMediaUrl}/?access_token=${sessionStorage.getItem('access-token')}`;\n        return fetch(url,{\n            method: 'GET',\n        }).then((response) => {\n            return response.json();\n        }).then((jsonResponse) => {\n            that.setState({\n                mediaData: jsonResponse.data\n            });\n        }).catch((error) => {\n            console.log('error media data',error);\n        });\n    }\n\n    handleOpenEditModal = () => {\n        this.setState({ editOpen: true });\n    }\n\n    handleCloseEditModal = () => {\n        this.setState({ editOpen: false });\n    }\n\n    handleOpenImageModal = (event) => {\n        var result = this.state.mediaData.find(item => {\n            return item.id === event.target.id\n        })\n        console.log(result);\n        this.setState({ imageModalOpen: true, currentItem: result });\n    }\n\n    handleCloseImageModal = () => {\n        this.setState({ imageModalOpen: false });\n    }\n\n    inputFullNameChangeHandler = (e) => {\n        this.setState({\n            newFullName: e.target.value\n        })\n    }\n\n    updateClickHandler = () => {\n        if (this.state.newFullName === '') {\n            this.setState({ fullNameRequired: 'dispBlock'})\n        } else {\n            this.setState({ fullNameRequired: 'dispNone' })\n        }\n\n        if (this.state.newFullName === \"\") { return }\n\n        this.setState({\n            full_name: this.state.newFullName\n        })\n\n        this.handleCloseEditModal()\n    }\n\n    likeClickHandler = (id) =>{\n      console.log('like id',id);\n      var foundItem = this.state.currentItem;\n\n      if (typeof foundItem !== undefined) {\n        if (!this.state.likeSet.has(id)) {\n          foundItem.likes.count++;\n          this.setState(({likeSet}) => ({\n            likeSet:new Set(likeSet.add(id))\n          }))\n        }else {\n          foundItem.likes.count--;\n          this.setState(({likeSet}) =>{\n            const newLike = new Set(likeSet);\n            newLike.delete(id);\n\n            return {\n              likeSet:newLike\n            };\n          });\n        }\n      }\n    }\n\n    onAddCommentClicked = (id) => {\n      console.log('id',id);\n      if (this.state.currentComment === \"\" || typeof this.state.currentComment === undefined) {\n        return;\n      }\n\n      let commentList = this.state.comments.hasOwnProperty(id)?\n        this.state.comments[id].concat(this.state.currentComment): [].concat(this.state.currentComment);\n\n      this.setState({\n        comments:{\n          ...this.state.comments,\n          [id]:commentList\n        },\n        currentComment:''\n      })\n    }\n\n    commentChangeHandler = (e) => {\n      this.setState({\n        currentComment:e.target.value\n      });\n    }\n\n    logout = () => {\n      sessionStorage.clear();\n      this.props.history.replace('/');\n    }\n\n    render() {\n      let hashTags = []\n      if (this.state.currentItem !== null) {\n        hashTags = this.state.currentItem.tags.map(hash =>{\n          return \"#\"+hash;\n        });\n        console.log('state',this.state);\n      }\n        return(\n            <div>\n                <Header\n                  screen={\"Profile\"}\n                  userProfileUrl={this.state.profile_picture}\n                  handleLogout={this.logout}/>\n                <div className=\"information-section\">\n                    <Avatar\n                        alt=\"User Image\"\n                        src={this.state.profile_picture}\n                        style={{width: \"50px\", height: \"50px\"}}\n                    />\n                    <span style={{marginLeft: \"20px\"}}>\n                        <div style={{width: \"600px\", fontSize: \"big\"}}> {this.state.username} <br />\n                            <div style={{float: \"left\", width: \"200px\", fontSize: \"small\"}}> Posts: {this.state.posts} </div>\n                            <div style={{float: \"left\", width: \"200px\", fontSize: \"small\"}}> Follows: {this.state.follows} </div>\n                            <div style={{float: \"left\", width: \"200px\", fontSize: \"small\"}}> Followed By: {this.state.followed_by}</div> <br />\n                        </div>\n                        <div style={{fontSize: \"small\"}}> {this.state.full_name}\n                        <Button mini variant=\"fab\" color=\"secondary\" aria-label=\"Edit\" style={{marginLeft: \"20px\"}} onClick={this.handleOpenEditModal}>\n                            <Icon>edit_icon</Icon>\n                        </Button>\n                        </div>\n                        <Modal\n                            aria-labelledby=\"edit-modal\"\n                            aria-describedby=\"modal to edit user full name\"\n                            open={this.state.editOpen}\n                            onClose={this.handleCloseEditModal}\n                            style={{alignItems: 'center', justifyContent: 'center'}}\n                        >\n                            <div style={styles.paper}>\n                                <Typography variant=\"h5\" id=\"modal-title\">\n                                    Edit\n                                </Typography><br />\n                                <FormControl required>\n                                    <InputLabel htmlFor=\"fullname\">Full Name</InputLabel>\n                                    <Input id=\"fullname\" onChange={this.inputFullNameChangeHandler} />\n                                    <FormHelperText className={this.state.fullNameRequired}><span className=\"red\">required</span></FormHelperText>\n                                </FormControl><br /><br /><br />\n                                <Button variant=\"contained\" color=\"primary\" onClick={this.updateClickHandler}>\n                                    UPDATE\n                                </Button>\n                            </div>\n                        </Modal>\n                    </span>\n                </div>\n\n                {this.state.mediaData != null &&\n                <GridList cellHeight={'auto'} cols={3} style={{padding: \"40px\"}}>\n                {this.state.mediaData.map(item => (\n                    <GridListTile key={item.id}>\n                    <CardMedia\n                        id={item.id}\n                        style={styles.media}\n                        image={item.images.standard_resolution.url}\n                        title={item.caption.text}\n                        onClick={this.handleOpenImageModal}\n                    />\n                    </GridListTile>\n                ))}\n                </GridList>}\n\n                {this.state.currentItem != null &&\n                <Modal\n                    aria-labelledby=\"image-modal\"\n                    aria-describedby=\"modal to show image details\"\n                    open={this.state.imageModalOpen}\n                    onClose={this.handleCloseImageModal}\n                    style={{display:'flex',justifyContent:'center',alignItems:'center'}}>\n                    <div style={{display:'flex',flexDirection:'row',backgroundColor: \"#fff\",width:'70%',height:'70%'}}>\n                      <div style={{width:'50%',padding:10}}>\n                        <img style={{height:'100%',width:'100%'}}\n                          src={this.state.currentItem.images.standard_resolution.url}\n                          alt={this.state.currentItem.caption.text} />\n                      </div>\n\n                      <div style={{display:'flex', flexDirection:'column', width:'50%', padding:10}}>\n                        <div style={{borderBottom:'2px solid #f2f2f2',display:'flex', flexDirection:'row',justifyContent:'flex-start',alignItems:'center'}}>\n                          <Avatar\n                            alt=\"User Image\"\n                            src={this.state.profile_picture}\n                            style={{width: \"50px\", height: \"50px\",margin:'10px'}}/>\n                            <Typography component=\"p\">\n                              {this.state.username}\n                            </Typography>\n                        </div>\n                        <div style={{display:'flex', height:'100%', flexDirection:'column', justifyContent:'space-between'}}>\n                          <div>\n                            <Typography component=\"p\">\n                              {this.state.currentItem.caption.text}\n                            </Typography>\n                            <Typography style={{color:'#4dabf5'}} component=\"p\" >\n                              {hashTags.join(' ')}\n                            </Typography>\n                            {this.state.comments.hasOwnProperty(this.state.currentItem.id) && this.state.comments[this.state.currentItem.id].map((comment, index)=>{\n                              return(\n                                <div key={index} className=\"row\">\n                                  <Typography component=\"p\" style={{fontWeight:'bold'}}>\n                                    {sessionStorage.getItem('username')}:\n                                  </Typography>\n                                  <Typography component=\"p\" >\n                                    {comment}\n                                  </Typography>\n                                </div>\n                              )\n                            })}\n                          </div>\n                          <div>\n                            <div className=\"row\">\n                              <IconButton aria-label=\"Add to favorites\" onClick={this.likeClickHandler.bind(this,this.state.currentItem.id)}>\n                                {this.state.likeSet.has(this.state.currentItem.id) && <FavoriteIconFill style={{color:'#F44336'}}/>}\n                                {!this.state.likeSet.has(this.state.currentItem.id) && <FavoriteIconBorder/>}\n                              </IconButton>\n                              <Typography component=\"p\">\n                                {this.state.currentItem.likes.count} Likes\n                              </Typography>\n                            </div>\n                            <div className=\"row\">\n                              <FormControl style={{flexGrow:1}}>\n                                <InputLabel htmlFor=\"comment\">Add Comment</InputLabel>\n                                <Input id=\"comment\" value={this.state.currentComment} onChange={this.commentChangeHandler}/>\n                              </FormControl>\n                              <FormControl>\n                                <Button onClick={this.onAddCommentClicked.bind(this,this.state.currentItem.id)}\n                                   variant=\"contained\" color=\"primary\">\n                                  ADD\n                                </Button>\n                              </FormControl>\n                            </div>\n                          </div>\n                        </div>\n\n                      </div>\n                    </div>\n                </Modal>}\n            </div>\n        )\n    }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}