{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\ATISRIVA\\\\Desktop\\\\imageviewer\\\\imageviewer\\\\src\\\\screens\\\\home\\\\Home.js\";\nimport React, { Component } from 'react';\nimport './Home.css';\nimport Header from '../../common/header/Header';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport { withStyles } from '@material-ui/core/styles';\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport Button from '@material-ui/core/Button';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport { constants } from '../../common/utils';\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      maxWidth: 1100\n    },\n    avatar: {\n      margin: 10\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%' // 16:9\n\n    },\n    formControl: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'baseline'\n    },\n    comment: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    hr: {\n      marginTop: '10px',\n      borderTop: '2px solid #f2f2f2'\n    },\n    gridList: {\n      width: 1100,\n      height: 'auto',\n      overflowY: 'auto'\n    },\n    grid: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginTop: 90\n    }\n  };\n};\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.onSearchEntered = function (value) {\n      console.log('search value', value);\n      var filteredData = _this.state.data;\n      filteredData = filteredData.filter(function (data) {\n        var string = data.caption.text.toLowerCase();\n        var subString = value.toLowerCase();\n        return string.includes(subString);\n      });\n\n      _this.setState({\n        filteredData: filteredData\n      });\n    };\n\n    _this.likeClickHandler = function (id) {\n      console.log('like id', id);\n\n      var foundItem = _this.state.data.find(function (item) {\n        return item.id === id;\n      });\n\n      if (typeof foundItem !== undefined) {\n        if (!_this.state.likeSet.has(id)) {\n          foundItem.likes.count++;\n\n          _this.setState(function (_ref) {\n            var likeSet = _ref.likeSet;\n            return {\n              likeSet: new Set(likeSet.add(id))\n            };\n          });\n        } else {\n          foundItem.likes.count--;\n\n          _this.setState(function (_ref2) {\n            var likeSet = _ref2.likeSet;\n            var newLike = new Set(likeSet);\n            newLike.delete(id);\n            return {\n              likeSet: newLike\n            };\n          });\n        }\n      }\n    };\n\n    _this.addCommentClickHandler = function (id) {\n      if (_this.state.currentComment === \"\" || typeof _this.state.currentComment === undefined) {\n        return;\n      }\n\n      var commentList = _this.state.comments.hasOwnProperty(id) ? _this.state.comments[id].concat(_this.state.currentComment) : [].concat(_this.state.currentComment);\n\n      _this.setState({\n        comments: _objectSpread({}, _this.state.comments, _defineProperty({}, id, commentList)),\n        currentComment: ''\n      });\n    };\n\n    _this.commentChangeHandler = function (e) {\n      _this.setState({\n        currentComment: e.target.value\n      });\n    };\n\n    _this.getUserInfo = function () {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userInfoUrl, \"/?access_token=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          userData: jsonResponse.data\n        });\n      }).catch(function (error) {\n        console.log('error user data', error);\n      });\n    };\n\n    _this.getMediaData = function () {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userMediaUrl, \"/?access_token=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          data: jsonResponse.data,\n          filteredData: jsonResponse.data\n        });\n      }).catch(function (error) {\n        console.log('error user data', error);\n      });\n    };\n\n    _this.logout = function () {\n      sessionStorage.clear();\n\n      _this.props.history.replace('/');\n    };\n\n    _this.navigateToAccount = function () {\n      _this.props.history.push('/profile');\n    };\n\n    if (sessionStorage.getItem('access-token') == null) {\n      props.history.replace('/');\n    }\n\n    _this.state = {\n      data: [],\n      filteredData: [],\n      userData: {},\n      likeSet: new Set(),\n      comments: {},\n      currrentComment: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUserInfo();\n      this.getMediaData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Header, {\n        userProfileUrl: this.state.userData.profile_picture,\n        screen: \"Home\",\n        searchHandler: this.onSearchEntered,\n        handleLogout: this.logout,\n        handleAccount: this.navigateToAccount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(GridList, {\n        className: classes.gridList,\n        cellHeight: 'auto',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.state.filteredData.map(function (item) {\n        return React.createElement(GridListTile, {\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(HomeItem, {\n          classes: classes,\n          item: item,\n          onLikedClicked: _this2.likeClickHandler,\n          onAddCommentClicked: _this2.addCommentClickHandler,\n          commentChangeHandler: _this2.commentChangeHandler,\n          comments: _this2.state.comments,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }));\n      }))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nvar HomeItem =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(HomeItem, _Component2);\n\n  function HomeItem() {\n    var _this3;\n\n    _classCallCheck(this, HomeItem);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(HomeItem).call(this));\n\n    _this3.onLikeClicked = function (id) {\n      if (_this3.state.isLiked) {\n        _this3.setState({\n          isLiked: false\n        });\n      } else {\n        _this3.setState({\n          isLiked: true\n        });\n      }\n\n      _this3.props.onLikedClicked(id);\n    };\n\n    _this3.commentChangeHandler = function (e) {\n      _this3.setState({\n        comment: e.target.value\n      });\n\n      _this3.props.commentChangeHandler(e);\n    };\n\n    _this3.onAddCommentClicked = function (id) {\n      if (_this3.state.comment === \"\" || typeof _this3.state.comment === undefined) {\n        return;\n      }\n\n      _this3.setState({\n        comment: \"\"\n      });\n\n      _this3.props.onAddCommentClicked(id);\n    };\n\n    _this3.state = {\n      isLiked: false,\n      comment: ''\n    };\n    return _this3;\n  }\n\n  _createClass(HomeItem, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          item = _this$props.item,\n          comments = _this$props.comments;\n      var createdTime = new Date(0);\n      createdTime.setUTCSeconds(item.created_time);\n      var yyyy = createdTime.getFullYear();\n      var mm = createdTime.getMonth() + 1;\n      var dd = createdTime.getDate();\n      var HH = createdTime.getHours();\n      var MM = createdTime.getMinutes();\n      var ss = createdTime.getSeconds();\n      var time = dd + \"/\" + mm + \"/\" + yyyy + \" \" + HH + \":\" + MM + \":\" + ss;\n      var hashTags = item.tags.map(function (hash) {\n        return \"#\" + hash;\n      });\n      return React.createElement(\"div\", {\n        className: \"home-main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: classes.card,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        avatar: React.createElement(Avatar, {\n          alt: \"User Profile Pic\",\n          src: item.user.profile_picture,\n          className: classes.avatar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }),\n        title: item.user.username,\n        subheader: time,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(CardMedia, {\n        className: classes.media,\n        image: item.images.standard_resolution.url,\n        title: item.caption.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.hr,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, item.caption.text), React.createElement(Typography, {\n        style: {\n          color: '#4dabf5'\n        },\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, hashTags.join(' ')))), React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"Add to favorites\",\n        onClick: this.onLikeClicked.bind(this, item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, this.state.isLiked && React.createElement(FavoriteIconFill, {\n        style: {\n          color: '#F44336'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), !this.state.isLiked && React.createElement(FavoriteIconBorder, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })), React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, item.likes.count, \" Likes\")), React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, comments.hasOwnProperty(item.id) && comments[item.id].map(function (comment, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          component: \"p\",\n          style: {\n            fontWeight: 'bold'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, sessionStorage.getItem('username'), \":\"), React.createElement(Typography, {\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, comment));\n      }), React.createElement(\"div\", {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        style: {\n          flexGrow: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"comment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Add Comment\"), React.createElement(Input, {\n        id: \"comment\",\n        value: this.state.comment,\n        onChange: this.commentChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.onAddCommentClicked.bind(this, item.id),\n        variant: \"contained\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"ADD\"))))));\n    }\n  }]);\n\n  return HomeItem;\n}(Component);\n\nexport default withStyles(styles)(Home);","map":{"version":3,"sources":["C:\\Users\\ATISRIVA\\Desktop\\imageviewer\\imageviewer\\src\\screens\\home\\Home.js"],"names":["React","Component","Header","Card","CardHeader","CardMedia","CardContent","CardActions","IconButton","Avatar","withStyles","FavoriteIconBorder","FavoriteIconFill","Typography","FormControl","InputLabel","Input","Button","GridList","GridListTile","constants","styles","theme","card","maxWidth","avatar","margin","media","height","paddingTop","formControl","display","flexDirection","justifyContent","alignItems","comment","hr","marginTop","borderTop","gridList","width","overflowY","grid","Home","props","onSearchEntered","value","console","log","filteredData","state","data","filter","string","caption","text","toLowerCase","subString","includes","setState","likeClickHandler","id","foundItem","find","item","undefined","likeSet","has","likes","count","Set","add","newLike","delete","addCommentClickHandler","currentComment","commentList","comments","hasOwnProperty","concat","commentChangeHandler","e","target","getUserInfo","that","url","userInfoUrl","sessionStorage","getItem","fetch","method","then","response","json","jsonResponse","userData","catch","error","getMediaData","userMediaUrl","logout","clear","history","replace","navigateToAccount","push","currrentComment","classes","profile_picture","map","HomeItem","onLikeClicked","isLiked","onLikedClicked","onAddCommentClicked","createdTime","Date","setUTCSeconds","created_time","yyyy","getFullYear","mm","getMonth","dd","getDate","HH","getHours","MM","getMinutes","ss","getSeconds","time","hashTags","tags","hash","user","username","images","standard_resolution","color","join","bind","index","fontWeight","flexGrow"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './Home.css';\nimport Header from '../../common/header/Header';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport {withStyles} from '@material-ui/core/styles';\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport Button from '@material-ui/core/Button';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport {constants} from '../../common/utils'\n\nconst styles =  theme => ({\n  card: {\n    maxWidth: 1100,\n  },\n  avatar: {\n    margin: 10,\n  },\n  media: {\n    height:0,\n    paddingTop: '56.25%', // 16:9\n  },\n  formControl: {\n    display:'flex',\n    flexDirection:'row',\n    justifyContent:'space-between',\n    alignItems:'baseline',\n  },\n  comment:{\n    display:'flex',\n    alignItems:'center'\n  },\n  hr:{\n    marginTop:'10px',\n    borderTop:'2px solid #f2f2f2'\n  },\n  gridList:{\n    width: 1100,\n    height: 'auto',\n    overflowY: 'auto',\n  },\n  grid:{\n    display:'flex',\n    justifyContent:'center',\n    alignItems:'center',\n    marginTop:90\n  }\n});\n\nclass Home extends Component{\n\n  constructor(props) {\n    super(props);\n    if (sessionStorage.getItem('access-token') == null) {\n      props.history.replace('/');\n    }\n    this.state = {\n      data: [],\n      filteredData:[],\n      userData:{},\n      likeSet:new Set(),\n      comments:{},\n      currrentComment:\"\"\n    }\n  }\n\n  componentDidMount(){\n    this.getUserInfo();\n    this.getMediaData();\n  }\n\n  render(){\n    const{classes} = this.props;\n    return(\n      <div>\n        <Header\n          userProfileUrl={this.state.userData.profile_picture}\n          screen={\"Home\"}\n          searchHandler={this.onSearchEntered}\n          handleLogout={this.logout}\n          handleAccount={this.navigateToAccount}/>\n        <div className={classes.grid}>\n          <GridList className={classes.gridList} cellHeight={'auto'}>\n            {this.state.filteredData.map(item => (\n              <GridListTile key={item.id}>\n                <HomeItem\n                  classes={classes}\n                  item={item}\n                  onLikedClicked={this.likeClickHandler}\n                  onAddCommentClicked={this.addCommentClickHandler}\n                  commentChangeHandler={this.commentChangeHandler}\n                  comments={this.state.comments}/>\n              </GridListTile>\n            ))}\n          </GridList>\n        </div>\n      </div>\n    );\n  }\n\n  onSearchEntered = (value) =>{\n    console.log('search value', value);\n    let filteredData = this.state.data;\n    filteredData = filteredData.filter((data) =>{\n      let string = data.caption.text.toLowerCase();\n      let subString = value.toLowerCase();\n      return string.includes(subString);\n    })\n    this.setState({\n      filteredData\n    })\n  }\n\n  likeClickHandler = (id) =>{\n    console.log('like id',id);\n    var foundItem = this.state.data.find((item) => {\n      return item.id === id;\n    })\n\n    if (typeof foundItem !== undefined) {\n      if (!this.state.likeSet.has(id)) {\n        foundItem.likes.count++;\n        this.setState(({likeSet}) => ({\n          likeSet:new Set(likeSet.add(id))\n        }))\n      }else {\n        foundItem.likes.count--;\n        this.setState(({likeSet}) =>{\n          const newLike = new Set(likeSet);\n          newLike.delete(id);\n\n          return {\n            likeSet:newLike\n          };\n        });\n      }\n    }\n  }\n\n  addCommentClickHandler = (id)=>{\n    if (this.state.currentComment === \"\" || typeof this.state.currentComment === undefined) {\n      return;\n    }\n\n    let commentList = this.state.comments.hasOwnProperty(id)?\n      this.state.comments[id].concat(this.state.currentComment): [].concat(this.state.currentComment);\n\n    this.setState({\n      comments:{\n        ...this.state.comments,\n        [id]:commentList\n      },\n      currentComment:''\n    })\n  }\n\n\n  commentChangeHandler = (e) => {\n    this.setState({\n      currentComment:e.target.value\n    });\n  }\n\n  getUserInfo = () => {\n    let that = this;\n    let url = `${constants.userInfoUrl}/?access_token=${sessionStorage.getItem('access-token')}`;\n    return fetch(url,{\n      method:'GET',\n    }).then((response) =>{\n        return response.json();\n    }).then((jsonResponse) =>{\n      that.setState({\n        userData:jsonResponse.data\n      });\n    }).catch((error) => {\n      console.log('error user data',error);\n    });\n  }\n\n  getMediaData = () => {\n    let that = this;\n    let url = `${constants.userMediaUrl}/?access_token=${sessionStorage.getItem('access-token')}`;\n    return fetch(url,{\n      method:'GET',\n    }).then((response) =>{\n        return response.json();\n    }).then((jsonResponse) =>{\n      that.setState({\n        data:jsonResponse.data,\n        filteredData:jsonResponse.data\n      });\n    }).catch((error) => {\n      console.log('error user data',error);\n    });\n  }\n\n  logout = () => {\n    sessionStorage.clear();\n    this.props.history.replace('/');\n  }\n\n  navigateToAccount = () =>{\n    this.props.history.push('/profile');\n  }\n}\n\nclass HomeItem extends Component{\n  constructor(){\n    super();\n    this.state = {\n      isLiked : false,\n      comment:'',\n    }\n  }\n\n  render(){\n    const {classes, item, comments} = this.props;\n\n    let createdTime = new Date(0);\n    createdTime.setUTCSeconds(item.created_time);\n    let yyyy = createdTime.getFullYear();\n    let mm = createdTime.getMonth() + 1;\n    let dd = createdTime.getDate();\n\n    let HH = createdTime.getHours();\n    let MM = createdTime.getMinutes();\n    let ss = createdTime.getSeconds();\n\n    let time = dd+\"/\"+mm+\"/\"+yyyy+\" \"+HH+\":\"+MM+\":\"+ss;\n    let hashTags = item.tags.map(hash =>{\n      return \"#\"+hash;\n    });\n    return(\n      <div className=\"home-main-container\">\n        <Card className={classes.card}>\n          <CardHeader\n            avatar={\n              <Avatar alt=\"User Profile Pic\" src={item.user.profile_picture} className={classes.avatar}/>\n            }\n            title={item.user.username}\n            subheader={time}\n          />\n          <CardContent>\n            <CardMedia\n              className={classes.media}\n              image={item.images.standard_resolution.url}\n              title={item.caption.text}\n            />\n            <div  className={classes.hr}>\n              <Typography component=\"p\">\n                {item.caption.text}\n              </Typography>\n              <Typography style={{color:'#4dabf5'}} component=\"p\" >\n                {hashTags.join(' ')}\n              </Typography>\n            </div>\n          </CardContent>\n\n            <CardActions>\n              <IconButton aria-label=\"Add to favorites\" onClick={this.onLikeClicked.bind(this,item.id)}>\n                {this.state.isLiked && <FavoriteIconFill style={{color:'#F44336'}}/>}\n                {!this.state.isLiked && <FavoriteIconBorder/>}\n              </IconButton>\n              <Typography component=\"p\">\n                {item.likes.count} Likes\n              </Typography>\n            </CardActions>\n\n            <CardContent>\n            {comments.hasOwnProperty(item.id) && comments[item.id].map((comment, index)=>{\n              return(\n                <div key={index} className=\"row\">\n                  <Typography component=\"p\" style={{fontWeight:'bold'}}>\n                    {sessionStorage.getItem('username')}:\n                  </Typography>\n                  <Typography component=\"p\" >\n                    {comment}\n                  </Typography>\n                </div>\n              )\n            })}\n            <div className={classes.formControl}>\n              <FormControl style={{flexGrow:1}}>\n                <InputLabel htmlFor=\"comment\">Add Comment</InputLabel>\n                <Input id=\"comment\" value={this.state.comment} onChange={this.commentChangeHandler}/>\n              </FormControl>\n              <FormControl>\n                <Button onClick={this.onAddCommentClicked.bind(this,item.id)}\n                   variant=\"contained\" color=\"primary\">\n                  ADD\n                </Button>\n              </FormControl>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  onLikeClicked = (id) => {\n    if (this.state.isLiked) {\n      this.setState({\n        isLiked:false\n      });\n    }else {\n      this.setState({\n        isLiked:true\n      });\n    }\n    this.props.onLikedClicked(id)\n  }\n\n  commentChangeHandler = (e) => {\n    this.setState({\n      comment:e.target.value,\n    });\n    this.props.commentChangeHandler(e);\n  }\n\n  onAddCommentClicked = (id) => {\n    if (this.state.comment === \"\" || typeof this.state.comment === undefined) {\n      return;\n    }\n    this.setState({\n      comment:\"\"\n    });\n    this.props.onAddCommentClicked(id);\n  }\n}\n\nexport default withStyles(styles)(Home);\n"]},"metadata":{},"sourceType":"module"}